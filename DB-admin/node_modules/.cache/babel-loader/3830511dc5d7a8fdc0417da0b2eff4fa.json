{"remainingRequest":"C:\\Users\\lenovo\\Desktop\\vue-admin\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\lenovo\\Desktop\\vue-admin\\src\\store\\modules\\user.js","dependencies":[{"path":"C:\\Users\\lenovo\\Desktop\\vue-admin\\src\\store\\modules\\user.js","mtime":1585839394000},{"path":"C:\\Users\\lenovo\\Desktop\\vue-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\lenovo\\Desktop\\vue-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport { loginByUsername, getUserInfo } from '@/api/login';\nimport { getToken, setToken, removeToken } from '@/utils/auth';\nvar user = {\n  state: {\n    token: getToken(),\n    name: '',\n    avatar: '',\n    status: '',\n    realName: '',\n    phone: '',\n    email: '',\n    roles: 0,\n    group: ''\n  },\n  mutations: {\n    SET_TOKEN: function SET_TOKEN(state, token) {\n      state.token = token;\n    },\n    SET_REALNAME: function SET_REALNAME(state, realName) {\n      state.realName = realName;\n    },\n    SET_EMAIL: function SET_EMAIL(state, email) {\n      state.email = email;\n    },\n    SET_PHONE: function SET_PHONE(state, phone) {\n      state.phone = phone;\n    },\n    SET_STATUS: function SET_STATUS(state, status) {\n      state.status = status;\n    },\n    SET_NAME: function SET_NAME(state, name) {\n      state.name = name;\n    },\n    SET_AVATAR: function SET_AVATAR(state, avatar) {\n      state.avatar = avatar;\n    },\n    SET_ROLES: function SET_ROLES(state, roles) {\n      state.roles = roles;\n    },\n    SET_GROUP: function SET_GROUP(state, group) {\n      state.group = group;\n    }\n  },\n  actions: {\n    // 用户名登录\n    LoginByUsername: function LoginByUsername(_ref, userInfo) {\n      var commit = _ref.commit;\n      var username = userInfo.username.trim();\n      return new Promise(function (resolve, reject) {\n        loginByUsername(username, userInfo.password).then(function (response) {\n          var data = response.data;\n          commit('SET_TOKEN', data.userToken);\n          setToken(response.data.userToken);\n          resolve();\n        }).catch(function (error) {\n          reject(error);\n        });\n      });\n    },\n    // 获取用户信息\n    GetUserInfo: function GetUserInfo(_ref2) {\n      var commit = _ref2.commit,\n          state = _ref2.state;\n      return new Promise(function (resolve, reject) {\n        getUserInfo().then(function (response) {\n          if (!response.data) {\n            // 由于mockjs 不支持自定义状态码只能这样hack\n            reject('error');\n          }\n\n          var data = response.data;\n\n          if (data.access && data.groupId > 0) {\n            commit('SET_ROLES', data.groupId);\n          } else {\n            reject('拉取用户权限失败');\n          }\n\n          commit('SET_NAME', data.userName);\n          commit('SET_AVATAR', data.img);\n          commit('SET_REALNAME', data.realName);\n          commit('SET_PHONE', data.phone);\n          commit('SET_EMAIL', data.email);\n          commit('SET_GROUP', data.group);\n          resolve(response);\n        }).catch(function (error) {\n          reject(error);\n        });\n      });\n    },\n    // 前端 登出\n    FedLogOut: function FedLogOut(_ref3) {\n      var commit = _ref3.commit;\n      return new Promise(function (resolve) {\n        commit('SET_TOKEN', '');\n        commit('SET_ROLES', 0);\n        removeToken();\n        resolve();\n      });\n    },\n    // 动态修改权限\n    ChangeRoles: function ChangeRoles(_ref4) {\n      var commit = _ref4.commit,\n          dispatch = _ref4.dispatch;\n      return new Promise(function (resolve) {\n        getUserInfo().then(function (response) {\n          var data = response.data;\n          commit('SET_ROLES', data.roles);\n          commit('SET_NAME', data.name);\n          commit('SET_AVATAR', data.avatar);\n          commit('SET_INTRODUCTION', data.introduction);\n          dispatch('GenerateRoutes', data); // 动态修改权限后 重绘侧边菜单\n\n          resolve();\n        });\n      });\n    }\n  }\n};\nexport default user;",{"version":3,"sources":["C:/Users/lenovo/Desktop/vue-admin/src/store/modules/user.js"],"names":["loginByUsername","getUserInfo","getToken","setToken","removeToken","user","state","token","name","avatar","status","realName","phone","email","roles","group","mutations","SET_TOKEN","SET_REALNAME","SET_EMAIL","SET_PHONE","SET_STATUS","SET_NAME","SET_AVATAR","SET_ROLES","SET_GROUP","actions","LoginByUsername","userInfo","commit","username","trim","Promise","resolve","reject","password","then","response","data","userToken","catch","error","GetUserInfo","access","groupId","userName","img","FedLogOut","ChangeRoles","dispatch","introduction"],"mappings":"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","sourcesContent":["import { loginByUsername, getUserInfo } from '@/api/login'\nimport { getToken, setToken, removeToken } from '@/utils/auth'\n\nconst user = {\n  state: {\n    token: getToken(),\n    name: '',\n    avatar: '',\n    status: '',\n    realName: '',\n    phone: '',\n    email: '',\n    roles: 0,\n    group: ''\n  },\n\n  mutations: {\n    SET_TOKEN: (state, token) => {\n      state.token = token\n    },\n    SET_REALNAME: (state, realName) => {\n      state.realName = realName\n    },\n    SET_EMAIL: (state, email) => {\n      state.email = email\n    },\n    SET_PHONE: (state, phone) => {\n      state.phone = phone\n    },\n    SET_STATUS: (state, status) => {\n      state.status = status\n    },\n    SET_NAME: (state, name) => {\n      state.name = name\n    },\n    SET_AVATAR: (state, avatar) => {\n      state.avatar = avatar\n    },\n    SET_ROLES: (state, roles) => {\n      state.roles = roles\n    },\n    SET_GROUP: (state, group) => {\n      state.group = group\n    }\n  },\n\n  actions: {\n    // 用户名登录\n    LoginByUsername({ commit }, userInfo) {\n      const username = userInfo.username.trim()\n      return new Promise((resolve, reject) => {\n        loginByUsername(username, userInfo.password).then(response => {\n          const data = response.data\n          commit('SET_TOKEN', data.userToken)\n          setToken(response.data.userToken)\n          resolve()\n        }).catch(error => {\n          reject(error)\n        })\n      })\n    },\n\n    // 获取用户信息\n    GetUserInfo({ commit, state }) {\n      return new Promise((resolve, reject) => {\n        getUserInfo().then(response => {\n          if (!response.data) { // 由于mockjs 不支持自定义状态码只能这样hack\n            reject('error')\n          }\n          const data = response.data\n\n          if (data.access && data.groupId > 0) {\n            commit('SET_ROLES', data.groupId)\n          } else {\n            reject('拉取用户权限失败')\n          }\n          commit('SET_NAME', data.userName)\n          commit('SET_AVATAR', data.img)\n          commit('SET_REALNAME', data.realName)\n          commit('SET_PHONE', data.phone)\n          commit('SET_EMAIL', data.email)\n          commit('SET_GROUP', data.group)\n          resolve(response)\n        }).catch(error => {\n          reject(error)\n        })\n      })\n    },\n\n    // 前端 登出\n    FedLogOut({ commit }) {\n      return new Promise(resolve => {\n        commit('SET_TOKEN', '')\n        commit('SET_ROLES', 0)\n        removeToken()\n        resolve()\n      })\n    },\n\n    // 动态修改权限\n    ChangeRoles({ commit, dispatch }) {\n      return new Promise(resolve => {\n        getUserInfo().then(response => {\n          const data = response.data\n          commit('SET_ROLES', data.roles)\n          commit('SET_NAME', data.name)\n          commit('SET_AVATAR', data.avatar)\n          commit('SET_INTRODUCTION', data.introduction)\n          dispatch('GenerateRoutes', data) // 动态修改权限后 重绘侧边菜单\n          resolve()\n        })\n      })\n    }\n  }\n}\n\nexport default user\n"]}]}