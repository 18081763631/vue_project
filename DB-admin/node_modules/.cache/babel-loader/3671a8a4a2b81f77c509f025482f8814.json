{"remainingRequest":"C:\\Users\\lenovo\\Desktop\\vue-admin\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\lenovo\\Desktop\\vue-admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\lenovo\\Desktop\\vue-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\lenovo\\Desktop\\vue-admin\\src\\views\\layout\\components\\TagsView.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\lenovo\\Desktop\\vue-admin\\src\\views\\layout\\components\\TagsView.vue","mtime":1585839394000},{"path":"C:\\Users\\lenovo\\Desktop\\vue-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\lenovo\\Desktop\\vue-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\lenovo\\Desktop\\vue-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\lenovo\\Desktop\\vue-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.array.from\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.function.name\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport ScrollPane from '@/components/ScrollPane';\nimport { generateTitle } from '@/utils/i18n';\nexport default {\n  components: {\n    ScrollPane: ScrollPane\n  },\n  data: function data() {\n    return {\n      visible: false,\n      top: 0,\n      left: 0,\n      selectedTag: {}\n    };\n  },\n  computed: {\n    visitedViews: function visitedViews() {\n      return this.$store.state.tagsView.visitedViews;\n    }\n  },\n  watch: {\n    $route: function $route() {\n      this.addViewTags();\n      this.moveToCurrentTag();\n    },\n    visible: function visible(value) {\n      if (value) {\n        document.body.addEventListener('click', this.closeMenu);\n      } else {\n        document.body.removeEventListener('click', this.closeMenu);\n      }\n    }\n  },\n  mounted: function mounted() {\n    this.addViewTags();\n  },\n  methods: {\n    generateTitle: generateTitle,\n    // generateTitle by vue-i18n\n    generateRoute: function generateRoute() {\n      if (this.$route.name) {\n        return this.$route;\n      }\n\n      return false;\n    },\n    isActive: function isActive(route) {\n      return route.path === this.$route.path;\n    },\n    addViewTags: function addViewTags() {\n      var route = this.generateRoute();\n\n      if (!route) {\n        return false;\n      }\n\n      this.$store.dispatch('addView', route);\n    },\n    moveToCurrentTag: function moveToCurrentTag() {\n      var _this = this;\n\n      var tags = this.$refs.tag;\n      this.$nextTick(function () {\n        var _iterator = _createForOfIteratorHelper(tags),\n            _step;\n\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var tag = _step.value;\n\n            if (tag.to.path === _this.$route.path) {\n              _this.$refs.scrollPane.moveToTarget(tag.$el); // when query is different then update\n\n\n              if (tag.to.fullPath !== _this.$route.fullPath) {\n                _this.$store.dispatch('updateVisitedView', _this.$route);\n              }\n\n              break;\n            }\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n      });\n    },\n    refreshSelectedTag: function refreshSelectedTag(view) {\n      var _this2 = this;\n\n      this.$store.dispatch('delCachedView', view).then(function () {\n        var fullPath = view.fullPath;\n\n        _this2.$nextTick(function () {\n          _this2.$router.replace({\n            path: '/redirect' + fullPath\n          });\n        });\n      });\n    },\n    closeSelectedTag: function closeSelectedTag(view) {\n      var _this3 = this;\n\n      this.$store.dispatch('delView', view).then(function (_ref) {\n        var visitedViews = _ref.visitedViews;\n\n        if (_this3.isActive(view)) {\n          var latestView = visitedViews.slice(-1)[0];\n\n          if (latestView) {\n            _this3.$router.push(latestView);\n          } else {\n            _this3.$router.push('/');\n          }\n        }\n      });\n    },\n    closeOthersTags: function closeOthersTags() {\n      var _this4 = this;\n\n      this.$router.push(this.selectedTag);\n      this.$store.dispatch('delOthersViews', this.selectedTag).then(function () {\n        _this4.moveToCurrentTag();\n      });\n    },\n    closeAllTags: function closeAllTags() {\n      this.$store.dispatch('delAllViews');\n      this.$router.push('/');\n    },\n    openMenu: function openMenu(tag, e) {\n      this.visible = true;\n      this.selectedTag = tag;\n      var offsetLeft = this.$el.getBoundingClientRect().left; // container margin left\n\n      this.left = e.clientX - offsetLeft + 15; // 15: margin right\n\n      this.top = e.clientY;\n    },\n    closeMenu: function closeMenu() {\n      this.visible = false;\n    }\n  }\n};",{"version":3,"sources":["TagsView.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"tags-view-container\">\n    <scroll-pane ref=\"scrollPane\" class=\"tags-view-wrapper\">\n      <router-link\n        v-for=\"tag in Array.from(visitedViews)\"\n        ref=\"tag\"\n        :class=\"isActive(tag)?'active':''\"\n        :to=\"tag\"\n        :key=\"tag.path\"\n        class=\"tags-view-item\"\n        @contextmenu.prevent.native=\"openMenu(tag,$event)\">\n        {{ generateTitle(tag.title) }}\n        <span class=\"el-icon-close\" @click.prevent.stop=\"closeSelectedTag(tag)\"/>\n      </router-link>\n    </scroll-pane>\n    <ul v-show=\"visible\" :style=\"{left:left+'px',top:top+'px'}\" class=\"contextmenu\">\n      <li @click=\"refreshSelectedTag(selectedTag)\">{{ $t('tagsView.refresh') }}</li>\n      <li @click=\"closeSelectedTag(selectedTag)\">{{ $t('tagsView.close') }}</li>\n      <li @click=\"closeOthersTags\">{{ $t('tagsView.closeOthers') }}</li>\n      <li @click=\"closeAllTags\">{{ $t('tagsView.closeAll') }}</li>\n    </ul>\n  </div>\n</template>\n\n<script>\nimport ScrollPane from '@/components/ScrollPane'\nimport { generateTitle } from '@/utils/i18n'\n\nexport default {\n  components: { ScrollPane },\n  data() {\n    return {\n      visible: false,\n      top: 0,\n      left: 0,\n      selectedTag: {}\n    }\n  },\n  computed: {\n    visitedViews() {\n      return this.$store.state.tagsView.visitedViews\n    }\n  },\n  watch: {\n    $route() {\n      this.addViewTags()\n      this.moveToCurrentTag()\n    },\n    visible(value) {\n      if (value) {\n        document.body.addEventListener('click', this.closeMenu)\n      } else {\n        document.body.removeEventListener('click', this.closeMenu)\n      }\n    }\n  },\n  mounted() {\n    this.addViewTags()\n  },\n  methods: {\n    generateTitle, // generateTitle by vue-i18n\n    generateRoute() {\n      if (this.$route.name) {\n        return this.$route\n      }\n      return false\n    },\n    isActive(route) {\n      return route.path === this.$route.path\n    },\n    addViewTags() {\n      const route = this.generateRoute()\n      if (!route) {\n        return false\n      }\n      this.$store.dispatch('addView', route)\n    },\n    moveToCurrentTag() {\n      const tags = this.$refs.tag\n      this.$nextTick(() => {\n        for (const tag of tags) {\n          if (tag.to.path === this.$route.path) {\n            this.$refs.scrollPane.moveToTarget(tag.$el)\n\n            // when query is different then update\n            if (tag.to.fullPath !== this.$route.fullPath) {\n              this.$store.dispatch('updateVisitedView', this.$route)\n            }\n\n            break\n          }\n        }\n      })\n    },\n    refreshSelectedTag(view) {\n      this.$store.dispatch('delCachedView', view).then(() => {\n        const { fullPath } = view\n        this.$nextTick(() => {\n          this.$router.replace({\n            path: '/redirect' + fullPath\n          })\n        })\n      })\n    },\n    closeSelectedTag(view) {\n      this.$store.dispatch('delView', view).then(({ visitedViews }) => {\n        if (this.isActive(view)) {\n          const latestView = visitedViews.slice(-1)[0]\n          if (latestView) {\n            this.$router.push(latestView)\n          } else {\n            this.$router.push('/')\n          }\n        }\n      })\n    },\n    closeOthersTags() {\n      this.$router.push(this.selectedTag)\n      this.$store.dispatch('delOthersViews', this.selectedTag).then(() => {\n        this.moveToCurrentTag()\n      })\n    },\n    closeAllTags() {\n      this.$store.dispatch('delAllViews')\n      this.$router.push('/')\n    },\n    openMenu(tag, e) {\n      this.visible = true\n      this.selectedTag = tag\n      const offsetLeft = this.$el.getBoundingClientRect().left // container margin left\n      this.left = e.clientX - offsetLeft + 15 // 15: margin right\n      this.top = e.clientY\n    },\n    closeMenu() {\n      this.visible = false\n    }\n  }\n}\n</script>\n\n<style rel=\"stylesheet/scss\" lang=\"scss\" scoped>\n.tags-view-container {\n  height: 34px;\n  width: 100%;\n  background: #fff;\n  border-bottom: 1px solid #d8dce5;\n  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, .12), 0 0 3px 0 rgba(0, 0, 0, .04);\n  .tags-view-wrapper {\n    .tags-view-item {\n      display: inline-block;\n      position: relative;\n      height: 26px;\n      line-height: 26px;\n      border: 1px solid #d8dce5;\n      color: #495060;\n      background: #fff;\n      padding: 0 8px;\n      font-size: 12px;\n      margin-left: 5px;\n      margin-top: 4px;\n      &:first-of-type {\n        margin-left: 15px;\n      }\n      &:last-of-type {\n        margin-right: 15px;\n      }\n      &.active {\n        background-color: #42b983;\n        color: #fff;\n        border-color: #42b983;\n        &::before {\n          content: '';\n          background: #fff;\n          display: inline-block;\n          width: 8px;\n          height: 8px;\n          border-radius: 50%;\n          position: relative;\n          margin-right: 2px;\n        }\n      }\n    }\n  }\n  .contextmenu {\n    margin: 0;\n    background: #fff;\n    z-index: 100;\n    position: absolute;\n    list-style-type: none;\n    padding: 5px 0;\n    border-radius: 4px;\n    font-size: 12px;\n    font-weight: 400;\n    color: #333;\n    box-shadow: 2px 2px 3px 0 rgba(0, 0, 0, .3);\n    li {\n      margin: 0;\n      padding: 7px 16px;\n      cursor: pointer;\n      &:hover {\n        background: #eee;\n      }\n    }\n  }\n}\n</style>\n\n<style rel=\"stylesheet/scss\" lang=\"scss\">\n//reset element css of el-icon-close\n.tags-view-wrapper {\n  .tags-view-item {\n    .el-icon-close {\n      width: 16px;\n      height: 16px;\n      vertical-align: 2px;\n      border-radius: 50%;\n      text-align: center;\n      transition: all .3s cubic-bezier(.645, .045, .355, 1);\n      transform-origin: 100% 50%;\n      &:before {\n        transform: scale(.6);\n        display: inline-block;\n        vertical-align: -3px;\n      }\n      &:hover {\n        background-color: #b4bccc;\n        color: #fff;\n      }\n    }\n  }\n}\n</style>\n"],"sourceRoot":"src/views/layout/components"}]}