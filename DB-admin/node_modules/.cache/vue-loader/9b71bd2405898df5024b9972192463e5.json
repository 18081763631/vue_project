{"remainingRequest":"C:\\Users\\lenovo\\Desktop\\vue-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\lenovo\\Desktop\\vue-admin\\src\\components\\Upload\\image.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\lenovo\\Desktop\\vue-admin\\src\\components\\Upload\\image.vue","mtime":1585839394000},{"path":"C:\\Users\\lenovo\\Desktop\\vue-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\lenovo\\Desktop\\vue-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\lenovo\\Desktop\\vue-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\lenovo\\Desktop\\vue-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { getArrByKey } from '@/utils'\nimport openWindow from '@/utils/openWindow'\nexport default {\n  name: 'ImageUpload',\n  props: {\n    value: {\n      type: Array,\n      default: []\n    },\n    config: {\n      type: Object,\n      default: {\n        fileName: 'file',\n        limit: 5,\n        multiple: false,\n        accept: 'image/*',\n        action: '',\n        drag: false\n      }\n    }\n  },\n  data() {\n    return {\n      limit: this.config.limit,\n      fileName: this.config.fileName,\n      multiple: this.config.multiple,\n      accept: this.config.accept,\n      action: this.config.action,\n      drag: this.config.drag,\n      dataobj: { filename: this.config.fileName }\n    }\n  },\n  computed: {\n    fileList() {\n      const imgarr = []\n      if (this.value === '') {\n        return []\n      }\n      if (typeof (this.value) === 'string') {\n        this.value = this.value.split(',')\n      }\n      for (let i = 0; i < this.value.length; i++) {\n        imgarr.push({ url: this.value[i] })\n      }\n      return imgarr\n    }\n\n  },\n  methods: {\n    emitInput(val) {\n      this.$emit('input', val)\n    },\n    handleRemove(file, fileList) {\n      if (fileList.length > 0) {\n        this.emitInput(getArrByKey(fileList, 'url'))\n      } else {\n        this.emitInput([])\n      }\n    },\n    handlePreview(file) {\n      openWindow(file.url, '图片预览', '500', '400')\n    },\n    handleExceed(files, fileList) {\n      this.$message.error('最多上传' + this.limit + '张图片')\n    },\n    beforeUpload(file) {\n      const isIMG = file.type === 'image/jpeg' || file.type === 'image/png'\n      const isLt5M = file.size / 1024 / 1024 < 5\n      if (!isIMG) {\n        this.$message.error('上传图片只能是 JPG、PNG 格式!')\n        return false\n      }\n      if (!isLt5M) {\n        this.$message.error('上传图片大小不能超过 5MB!')\n        return false\n      }\n      return isIMG && isLt5M\n    },\n    onProgress(event, file, fileList) {\n      console.log('========onProgress=========')\n      console.log(event, file, fileList)\n      console.log('========onProgress=========')\n    },\n    handleSuccess(res, file, fileList) {\n      if (res.status === 1) {\n        for (let i = 0; i < fileList.length; i++) {\n          if (fileList[i]['uid'] === file['uid']) {\n            fileList[i]['url'] = res.data.url\n            break\n          }\n        }\n        this.emitInput(getArrByKey(fileList, 'url'))\n      } else {\n        for (let i = 0; i < fileList.length; i++) {\n          if (fileList[i]['uid'] === file['uid']) {\n            fileList.splice(i, 1)\n            break\n          }\n        }\n        this.$message.error(res.msg)\n      }\n    },\n    handleError(err, file, fileList) {\n      this.$message.error(err)\n    }\n\n  }\n}\n",{"version":3,"sources":["image.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"image.vue","sourceRoot":"src/components/Upload","sourcesContent":["<template>\n  <div class=\"upload-container\">\n    <el-upload\n      :show-file-list=\"true\"\n      :data=\"dataobj\"\n      :action=\"action\"\n      :multiple=\"multiple\"\n      :name=\"fileName\"\n      :accept=\"accept\"\n      :drag=\"drag\"\n      :limit=\"limit\"\n      :file-list=\"fileList\"\n      :on-preview=\"handlePreview\"\n      :on-exceed=\"handleExceed\"\n      :before-upload=\"beforeUpload\"\n      :on-progress=\"onProgress\"\n      :on-success=\"handleSuccess\"\n      :on-error=\"handleError\"\n      :on-remove=\"handleRemove\"\n      class=\"image-uploader\"\n      list-type=\"picture-card\">\n      <i class=\"el-icon-plus\"/>\n    </el-upload>\n  </div>\n</template>\n\n<script>\nimport { getArrByKey } from '@/utils'\nimport openWindow from '@/utils/openWindow'\nexport default {\n  name: 'ImageUpload',\n  props: {\n    value: {\n      type: Array,\n      default: []\n    },\n    config: {\n      type: Object,\n      default: {\n        fileName: 'file',\n        limit: 5,\n        multiple: false,\n        accept: 'image/*',\n        action: '',\n        drag: false\n      }\n    }\n  },\n  data() {\n    return {\n      limit: this.config.limit,\n      fileName: this.config.fileName,\n      multiple: this.config.multiple,\n      accept: this.config.accept,\n      action: this.config.action,\n      drag: this.config.drag,\n      dataobj: { filename: this.config.fileName }\n    }\n  },\n  computed: {\n    fileList() {\n      const imgarr = []\n      if (this.value === '') {\n        return []\n      }\n      if (typeof (this.value) === 'string') {\n        this.value = this.value.split(',')\n      }\n      for (let i = 0; i < this.value.length; i++) {\n        imgarr.push({ url: this.value[i] })\n      }\n      return imgarr\n    }\n\n  },\n  methods: {\n    emitInput(val) {\n      this.$emit('input', val)\n    },\n    handleRemove(file, fileList) {\n      if (fileList.length > 0) {\n        this.emitInput(getArrByKey(fileList, 'url'))\n      } else {\n        this.emitInput([])\n      }\n    },\n    handlePreview(file) {\n      openWindow(file.url, '图片预览', '500', '400')\n    },\n    handleExceed(files, fileList) {\n      this.$message.error('最多上传' + this.limit + '张图片')\n    },\n    beforeUpload(file) {\n      const isIMG = file.type === 'image/jpeg' || file.type === 'image/png'\n      const isLt5M = file.size / 1024 / 1024 < 5\n      if (!isIMG) {\n        this.$message.error('上传图片只能是 JPG、PNG 格式!')\n        return false\n      }\n      if (!isLt5M) {\n        this.$message.error('上传图片大小不能超过 5MB!')\n        return false\n      }\n      return isIMG && isLt5M\n    },\n    onProgress(event, file, fileList) {\n      console.log('========onProgress=========')\n      console.log(event, file, fileList)\n      console.log('========onProgress=========')\n    },\n    handleSuccess(res, file, fileList) {\n      if (res.status === 1) {\n        for (let i = 0; i < fileList.length; i++) {\n          if (fileList[i]['uid'] === file['uid']) {\n            fileList[i]['url'] = res.data.url\n            break\n          }\n        }\n        this.emitInput(getArrByKey(fileList, 'url'))\n      } else {\n        for (let i = 0; i < fileList.length; i++) {\n          if (fileList[i]['uid'] === file['uid']) {\n            fileList.splice(i, 1)\n            break\n          }\n        }\n        this.$message.error(res.msg)\n      }\n    },\n    handleError(err, file, fileList) {\n      this.$message.error(err)\n    }\n\n  }\n}\n</script>\n<style rel=\"stylesheet/scss\" lang=\"scss\">\n\t.image-uploader {\n\t\t.el-upload {\n\t\t\tborder: 1px dashed #d9d9d9;\n\t\t\tborder-radius: 6px;\n\t\t\tcursor: pointer;\n\t\t\tposition: relative;\n\t\t\toverflow: hidden;\n\t\t\twidth: 160px;\n\t\t\theight: 160px;\n\t\t\t.el-upload-dragger{\n\t\t\t\theight: 100%;\n\t\t\t}\n\t\t\t&:hover{\n\t\t\t\tborder-color: #409EFF;\n\t\t\t}\n\t\t}\n\t\t.el-upload-list__item{\n\t\t\twidth: 160px;\n\t\t\theight: 160px;\n\t\t}\n\t\t.image {\n\t\t\twidth: 178px;\n\t\t\theight: 178px;\n\t\t\tdisplay: block;\n\t\t}\n\t\t.image-uploader-icon {\n\t\t\tfont-size: 28px;\n\t\t\tcolor: #8c939d;\n\t\t\twidth: 178px;\n\t\t\theight: 178px;\n\t\t\tline-height: 178px;\n\t\t\ttext-align: center;\n\t\t}\n\n\t}\n</style>\n"]}]}